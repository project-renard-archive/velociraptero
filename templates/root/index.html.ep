% layout 'default';
% title 'Velociraptero';

<div id="item-data-view" class="row">
  <div id="category">
    <div id="category-tree"></div>
  </div>

  <div id="item-data">
    <table id="item-data-table">
    </table>
  </div>
</div>

<div id="doc-view" class="row">
  <div id="doc"></div>
</div>

<script id="item-template" type="text/template">
  <a class="item">
    <div class="cover">
      {{ if (  typeof(cover) !== 'undefined' && cover ) { }}
      <img class="cover" src="{{-  cover }}"/>
      {{ } else { }}
      <i class="icon icon-4x icon-book"></i>
      {{ } }}
    </div>
    <div class="title">{{- title }}</div>
    {{ if (  typeof(author) !== 'undefined' && author ) { }}
    <div class="author">{{- author.join("; ") }}</div>
    {{ } }}
    {{ if ( typeof(date) !== 'undefined' && date ) { }}
    <div class="author">{{- date }}</div>
    {{ } }}
  </a>
</script>

<script id="attachment-template" type="text/template">
  <iframe
    src="<%== param 'viewer_url' %>?file={{- encodeURIComponent(item_attachment_file_url) }}"
    seamless
    class="file-view">
  </iframe>
</script>


%= javascript begin
  var require = {
    config: {
      "cs!app/app": <%== param 'app_config' %>,
      "cs!app/view/attachmentview": <%== param 'attachmentview_config' %>
    }
  };
% end

<script data-main="<%= url_for '/script/setup.js' %>" src="<%= url_for '/vendor/requirejs/require.js' %>"></script>
